[supervisord]
nodaemon=true
user=root
logfile=/app/logs/supervisord.log
pidfile=/var/run/supervisord.pid

[program:gunicorn]
command=gunicorn wimm_project.wsgi:application --bind 0.0.0.0:8000 --workers=%(ENV_GUNICORN_WORKERS)s --timeout=%(ENV_GUNICORN_TIMEOUT)s --access-logfile - --error-logfile - --log-level info
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/gunicorn.log
stderr_logfile=/app/logs/gunicorn_error.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB
priority=100

[program:daphne]
command=daphne wimm_project.asgi:application --bind 0.0.0.0:%(ENV_DAPHNE_PORT)s --access-log - --proxy-headers
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/daphne.log
stderr_logfile=/app/logs/daphne_error.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB
priority=100

[program:update_monitor]
command=python /app/update_monitor.py
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/update_monitor.log
stderr_logfile=/app/logs/update_monitor_error.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB
priority=200
